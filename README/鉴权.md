# 鉴权

## 设计思路勘误

### 旧思路

**过程：**用户账号是唯一的 ->拿到后端全量用户数据根据唯一的账号来获取此用户的账号密码进行对比 ->然后再根据用户数据中的 identity 值确定其权限级别。

**错误：**

1. **不能在前端“拿到用户数据再匹配”来做鉴权**。用户数据库（或其敏感信息）绝不能下发到浏览器；
2. 前端拿到全量用户和密码（哪怕是明文/可逆密文）= **信息泄露**
3. 前端做“匹配/鉴权” = **可被篡改**（任何人都能在控制台给自己塞个 admin）
4. 登录态放 `localStorage`（JS 可读）= **XSS 即失守**

<img src="C:\home\HRManageSys\README\鉴权.assets\image-20250922112838329.png" alt="image-20250922112838329" style="zoom: 50%;" />

权限的“判定与放行”必须由**后端**作为最终可信方执行。前端只做两件事：

- 触发认证流程并保存会话态；

- 基于后端返回的“已认证用户信息 + 权限声明”**做 UI 级别的显隐/导航控制**。
- 真正的接口访问权限要在服务端校验。